<app-page-header
  color="global"
  label="{{'page-title.global' | translate}}"
  [disabled]="!!(rxSearchResult$ | async)?.exactMatch"
  (addItem)="showCreateDialog()"
>
  <app-item-list-searchbar
    [query]="(rxState$ | async)?.searchQuery"
    (queryChange)="searchFor($event)"
    (hitEnter)="addItemFromSearch()"
  ></app-item-list-searchbar>
  <app-item-list-toolbar
    (selectDisplayMode)="setDisplayMode($event)"
  ></app-item-list-toolbar>
</app-page-header>

<ion-content>
  <app-item-list-quickadd
    color="global"
    listName="{{'list-header.global' | translate}}"
    [showQuickAdd]="(rxSearchResult$ | async)?.showQuickAdd"
    [showQuickAddGlobal]="false"
    [quickAddLabel]="(rxSearchResult$ | async)?.searchTerm"
    (quickAddItem)="showCreateDialog()"
  ></app-item-list-quickadd>

  <app-item-list
    #globalListComponent
    headerColor="global"
    header="{{'list-header.global' | translate}}"
    [mode]="(rxState$ | async)?.mode ?? 'alphabetical'"
    [items]="(rxItems$ | async)"
    [categories]="(rxCategories$ | async)"
    [itemTemplate]="globalItem"
    (selectCategory)="selectCategory($event)"
  ></app-item-list>
  <ng-template #globalItem let-item>
    <app-global-item
      [item]="item"
      [itemList]="globalListComponent"
      (selectItem)="showEditDialog(item)"
      (deleteItem)="removeItem(item)"
    ></app-global-item>
  </ng-template>

  <app-item-list-empty
    [isEmptyList]="!((rxItems$ | async)?.length)"
    [isSearching]="(rxSearchResult$ |async)?.hasSearchTerm"
    [searchTerm]="(rxSearchResult$ |async)?.searchTerm"
    (emptyItem)="showCreateDialog()"
  ></app-item-list-empty>
</ion-content>

<!--<ion-modal-->
<!--  [isOpen]="(rxState$ | async)?.isEditing === true"-->
<!--  (didDismiss)="closeEditDialog()"-->
<!--&gt;-->
<!--  <ng-template>-->
<!--    <app-edit-global-item-dialog-->
<!--      [mode]="(rxState$|async)?.editMode ?? 'create'"-->
<!--      (cancel)="closeEditDialog()"-->
<!--      (saveItem)="updateItem($event)"-->
<!--      [item]="(rxState$|async)?.data"-->
<!--      [categories]="(rxCategories$ | async) ?? []"-->
<!--    ></app-edit-global-item-dialog>-->
<!--  </ng-template>-->
<!--</ion-modal>-->
