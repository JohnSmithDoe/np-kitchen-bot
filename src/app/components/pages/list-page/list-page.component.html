<app-page-header
  color="shopping"
  label="{{ 'page-title.shopping' | translate }}"
  [disabled]="!!(rxSearchResult$ | async)?.exactMatch"
  (addItem)="showCreateDialog()"
>
  <app-item-list-searchbar
    [query]="(rxState$ | async)?.searchQuery"
    (queryChange)="searchFor($event)"
    (hitEnter)="addItemFromSearch()"
  ></app-item-list-searchbar>
  <app-item-list-toolbar
    (selectDisplayMode)="setDisplayMode($event)"
    (selectSortMode)="setSortMode($event)"
  ></app-item-list-toolbar>
</app-page-header>

<ion-content>
  <app-item-list-quickadd
    (quickAddItem)="addItemFromSearch()"
    (quickCreateGlobal)="showCreateGlobalDialog()"
  ></app-item-list-quickadd>

  <app-item-list
    [headerColor]="(rxState$ | async)?.filterBy ? 'category' : 'shopping'"
    [header]="
      (rxState$ | async)?.filterBy ?? ('list-header.shopping' | translate)
    "
    [mode]="(rxState$ | async)?.mode ?? 'alphabetical'"
    [items]="rxItems$ | async"
    [categories]="rxCategories$ | async"
    [itemTemplate]="itemTemplate"
    (selectCategory)="selectCategory($event)"
  >
    <!--    rxCategories$ | async-->
    <ion-buttons slot="end">
      <ion-button [hidden]="!(rxItems$ | async)?.length" id="open-action-sheet">
        <ion-icon name="bag-add" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </app-item-list>

  <app-item-list-empty
    [isEmptyList]="!(rxItems$ | async)?.length"
    [isSearching]="(rxSearchResult$ | async)?.hasSearchTerm"
    [searchTerm]="(rxSearchResult$ | async)?.searchTerm"
    (emptyItem)="showCreateDialog()"
  ></app-item-list-empty>

  <app-item-list-search-result
    [results]="rxSearchResult$ | async"
    (selectGlobalItem)="addGlobalItem($event)"
    (selectStorageItem)="addStorageItem($event)"
    (selectShoppingItem)="addShoppingItem($event)"
  ></app-item-list-search-result>
</ion-content>
